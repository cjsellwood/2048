(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),i=n(7),r=n.n(i),l=(n(13),n(8)),a=n(5),s=n(2),d=(n(14),n(0));var u=function(){var e=Object(c.useState)(!0),t=Object(s.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)(0),r=Object(s.a)(i,2),u=r[0],f=r[1],v=Object(c.useState)(0),j=Object(s.a)(v,2),h=j[0],b=j[1],p=Object(c.useState)(0),m=Object(s.a)(p,2),x=m[0],O=m[1],g=Object(c.useState)(Math.min(.8*window.innerWidth,.7*window.innerHeight)),w=Object(s.a)(g,2),N=w[0],k=w[1],S=function(){for(var e=[],t=0;t<4;t++){for(var n=[],c=0;c<4;c++)n.push({left:c,top:t,occupied:!1});e.push(n)}return e},M=Object(c.useState)(S()),y=Object(s.a)(M,2),I=y[0],B=y[1],F=function(){for(var e=[],t=0;t<4;t++){for(var n=[],c=0;c<4;c++)n.push({left:c,top:t,occupied:I[t][c].occupied});e.push(n)}return e},A=Object(c.useState)([]),C=Object(s.a)(A,2),W=C[0],L=C[1],T=function(){k(Math.min(.8*window.innerWidth,.7*window.innerHeight))},R=function(e){if(1!==x){var t;"d"===e.key||"ArrowRight"===e.key||"right"===e?t="right":"a"===e.key||"ArrowLeft"===e.key||"left"===e?t="left":"w"===e.key||"ArrowUp"===e.key||"up"===e?t="up":"s"!==e.key&&"ArrowDown"!==e.key&&"down"!==e||(t="down");var n=F(),c=function(){var e=[];return W.forEach((function(t){e.push(Object(a.a)({},t))})),e}();c=c.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{topFrom:e.top,leftFrom:e.left})}));var i={didMove:!1};switch(t){case"right":i=function(e,t,n){for(var c=!1,o=function(o){for(var i=function(i){if(!t.filter((function(e){return e.left===o&&e.top===i})).length||3===o)return"continue";for(var r=t.findIndex((function(e){return e.left===o&&e.top===i})),l=0,a=o+1;a<=3&&!e[i][a].occupied;)l++,a++;var s=t.findIndex((function(e){return e.left===o+l+1&&e.top===i}));if(l+o+1<=3&&e[i][o+l+1].occupied&&-1!==s&&t[s].value===t[r].value)n+=2*t[s].value,t[s].value*=2,t.splice(r,1),e[i][o].occupied=!1,c=!0;else{if(!l)return"continue";t[r].leftFrom=t[r].left,t[r].left=t[r].left+l,e[i][o].occupied=!1,e[i][o+l].occupied=!0,c=!0}},r=0;r<=3;r++)i(r)},i=3;i>=0;i--)o(i);return{movedBoard:e,movedTiles:t,didMove:c,movedScore:n}}(n,c,Number(u));break;case"left":i=function(e,t,n){for(var c=!1,o=function(o){for(var i=function(i){if(!t.filter((function(e){return e.left===o&&e.top===i})).length||0===o)return"continue";for(var r=t.findIndex((function(e){return e.left===o&&e.top===i})),l=0,a=o-1;a>=0&&!e[i][a].occupied;)l++,a--;var s=t.findIndex((function(e){return e.left===o-l-1&&e.top===i}));if(o-l-1>=0&&e[i][o-l-1].occupied&&-1!==s&&t[s].value===t[r].value)console.log("merge"),console.log("mer",t[r],t[s]),console.log("go"),n+=2*t[s].value,t[s].value*=2,t.splice(r,1),e[i][o].occupied=!1,c=!0;else{if(!l)return"continue";t[r].leftFrom=t[r].left,t[r].left=t[r].left-l,e[i][o].occupied=!1,e[i][o-l].occupied=!0,c=!0}},r=0;r<=3;r++)i(r)},i=0;i<=3;i++)o(i);return{movedBoard:e,movedTiles:t,didMove:c,movedScore:n}}(n,c,Number(u));break;case"up":i=function(e,t,n){for(var c=!1,o=function(o){for(var i=function(i){if(!t.filter((function(e){return e.left===i&&e.top===o})).length||0===o)return"continue";for(var r=t.findIndex((function(e){return e.left===i&&e.top===o})),l=0,a=o-1;a>=0&&!e[a][i].occupied;)l++,a--;var s=t.findIndex((function(e){return e.left===i&&e.top===o-l-1}));if(o-l-1>=0&&e[o-l-1][i].occupied&&-1!==s&&t[s].value===t[r].value)console.log("merge"),console.log("mer",t[r],t[s]),console.log("go"),n+=2*t[s].value,t[s].value*=2,t.splice(r,1),e[o][i].occupied=!1,c=!0;else{if(!l)return"continue";t[r].topFrom=t[r].top,t[r].top=t[r].top-l,e[o][i].occupied=!1,e[o-l][i].occupied=!0,c=!0}},r=0;r<=3;r++)i(r)},i=0;i<=3;i++)o(i);return{movedBoard:e,movedTiles:t,didMove:c,movedScore:n}}(n,c,Number(u));break;case"down":i=function(e,t,n){for(var c=!1,o=function(o){for(var i=function(i){if(!t.filter((function(e){return e.left===i&&e.top===o})).length||3===o)return"continue";for(var r=t.findIndex((function(e){return e.left===i&&e.top===o})),l=0,a=o+1;a<=3&&!e[a][i].occupied;)l++,a++;var s=t.findIndex((function(e){return e.left===i&&e.top===o+l+1}));if(o+l+1<=3&&e[o+l+1][i].occupied&&-1!==s&&t[s].value===t[r].value)n+=2*t[s].value,t[s].value*=2,t.splice(r,1),e[o][i].occupied=!1,c=!0;else{if(!l)return"continue";t[r].topFrom=t[r].top,t[r].top=t[r].top+l,e[o][i].occupied=!1,e[o+l][i].occupied=!0,c=!0}},r=0;r<=3;r++)i(r)},i=3;i>=0;i--)o(i);return{movedBoard:e,movedTiles:t,didMove:c,movedScore:n}}(n,c,Number(u))}if(i.didMove)B(i.movedBoard),L(i.movedTiles),o(!0),f(i.movedScore),i.movedScore>h&&(b(i.movedScore),localStorage.setItem("bestScore",i.movedScore)),i.movedTiles.filter((function(e){return 2048===e.value})).length&&O(x+1)}},z=Object(c.useRef)(null);return Object(c.useEffect)((function(){window.addEventListener("resize",T),z.current.focus();var e=Number(localStorage.getItem("bestScore"));e&&b(e)}),[]),n&&(!function(){var e,t,n,c=!0;if(16!==W.length){for(;c;)t=Math.floor(4*Math.random()),n=Math.floor(4*Math.random()),c=(e=I[t][n]).occupied;var o={left:e.left,top:e.top,leftFrom:e.left,topFrom:e.top,value:2};L([].concat(Object(l.a)(W),[o]));var i=F();i[t][n].occupied=!0,B(i)}}(),o(!1)),Object(d.jsxs)("div",{className:"wrapper",onKeyDown:R,tabIndex:"0",ref:z,children:[Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:function(){f(0),B(S()),L([]),o(!0),O(0)},children:"New Game"})}),Object(d.jsx)("div",{className:"score",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Score"}),Object(d.jsx)("h4",{children:u})]})}),Object(d.jsx)("div",{className:"score",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Best"}),Object(d.jsx)("h4",{children:h})]})})]}),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{className:"grid",children:Object(d.jsx)("div",{})}),W.map((function(e,t){var n={left:"".concat(e.left*N*.25,"px"),top:"".concat(e.top*N*.25,"px"),"--left":"".concat(e.left*N*.25,"px"),"--leftFrom":"".concat(e.leftFrom*N*.25,"px"),"--top":"".concat(e.top*N*.25,"px"),"--topFrom":"".concat(e.topFrom*N*.25,"px"),animation:"slide 0.1s"};return t===W.length-1&&(n.animation="fadeIn 0.2s cubic-bezier(1,0,1,.001)"),Object(d.jsx)("div",{className:"tile",style:n,children:Object(d.jsx)("div",{className:"tile-".concat(e.value),children:Object(d.jsx)("p",{children:e.value})})},"".concat(e.left).concat(e.top))})),1===x?Object(d.jsxs)("div",{className:"winner",children:[Object(d.jsx)("h1",{children:"Winner"}),Object(d.jsx)("button",{onClick:function(){O(2),z.current.focus()},children:"Keep Playing"})]}):null]}),Object(d.jsx)("div",{className:"buttons",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"up","aria-label":"up",onClick:function(){return R("up")},children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(d.jsx)("path",{fillRule:"evenodd",d:"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"})})}),Object(d.jsx)("button",{className:"left","aria-label":"left",onClick:function(){return R("left")},children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(d.jsx)("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})})}),Object(d.jsx)("button",{className:"right","aria-label":"right",onClick:function(){return R("right")},children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(d.jsx)("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"})})}),Object(d.jsx)("button",{className:"down","aria-label":"down",onClick:function(){return R("down")},children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(d.jsx)("path",{fillRule:"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"})})})]})})]})},f=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function v(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(u,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/2048",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/2048","/service-worker.js");f?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):v(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):v(t,e)}))}}()}},[[16,1,2]]]);
//# sourceMappingURL=main.ac1005e2.chunk.js.map