{"version":3,"sources":["functions/movement.js","App.js","serviceWorkerRegistration.js","index.js"],"names":["getIndex","tiles","left","top","findIndex","tile","App","useState","spawn","setSpawn","score","setScore","bestScore","setBestScore","winner","setWinner","Math","min","window","innerWidth","innerHeight","boardWidth","setBoardWidth","createBoard","board","i","row","j","push","occupied","setBoard","duplicateBoard","boardCopy","setTiles","windowResized","keyPressed","e","direction","key","newBoard","newTiles","forEach","duplicateTiles","map","topFrom","leftFrom","move","didMove","movedBoard","movedTiles","movedScore","index","distance","k","hitIndex","value","splice","movement","Number","localStorage","setItem","filter","length","wrapperRef","useRef","useEffect","addEventListener","current","focus","bestLocal","getItem","position","col","floor","random","newTile","spawnTile","className","onKeyDown","tabIndex","ref","onClick","tileStyle","animation","style","aria-label","xmlns","width","height","fill","viewBox","fillRule","d","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.5b4e5370.chunk.js","sourcesContent":["// Get index of current tile in tiles array\nconst getIndex = (tiles, left, top) => {\n  return tiles.findIndex((tile) => tile.left === left && tile.top === top);\n};\n\nexport const moveRight = (movedBoard, movedTiles, movedScore) => {\n  let didMove = false;\n  for (let i = 3; i >= 0; i--) {\n    for (let j = 0; j <= 3; j++) {\n      // Get index of tile in state\n      const index = getIndex(movedTiles, i, j);\n\n      // Stop if not a tile\n      if (index === -1) continue;\n\n      // Get how far the tile can move\n      let distance = 0;\n      let k = i + 1;\n      while (k <= 3 && !movedBoard[j][k].occupied) {\n        distance++;\n        k++;\n      }\n\n      // Get index of hit tile\n      const hitIndex = getIndex(movedTiles, i + distance + 1, j);\n\n      // Check if can merge\n      if (\n        distance + i + 1 <= 3 &&\n        movedBoard[j][i + distance + 1].occupied &&\n        hitIndex !== -1 &&\n        movedTiles[hitIndex].value === movedTiles[index].value\n      ) {\n        // Add to score\n        movedScore += movedTiles[hitIndex].value * 2;\n\n        // Change value of hit tile\n        movedTiles[hitIndex].value *= 2;\n\n        // Delete current tile\n        movedTiles.splice(index, 1);\n\n        // Change to unoccupied\n        movedBoard[j][i].occupied = false;\n\n        didMove = true;\n      } else {\n        // Return if nothing can move\n        if (!distance) {\n          continue;\n        }\n\n        // Move to right unoccupied space\n        movedTiles[index].leftFrom = movedTiles[index].left;\n        movedTiles[index].left = movedTiles[index].left + distance;\n\n        movedBoard[j][i].occupied = false;\n        movedBoard[j][i + distance].occupied = true;\n        didMove = true;\n      }\n    }\n  }\n  return { movedBoard, movedTiles, didMove, movedScore };\n};\n\nexport const moveLeft = (movedBoard, movedTiles, movedScore) => {\n  let didMove = false;\n  for (let i = 0; i <= 3; i++) {\n    for (let j = 0; j <= 3; j++) {\n      // Get index of tile in state\n      const index = getIndex(movedTiles, i, j);\n\n      // Stop if not a tile\n      if (index === -1) continue;\n\n      // Get how far the tile can move\n      let distance = 0;\n      let k = i - 1;\n      while (k >= 0 && !movedBoard[j][k].occupied) {\n        distance++;\n        k--;\n      }\n\n      // Get index of hit tile\n      const hitIndex = getIndex(movedTiles, i - distance - 1, j);\n\n      // Check if can merge\n      if (\n        i - distance - 1 >= 0 &&\n        movedBoard[j][i - distance - 1].occupied &&\n        hitIndex !== -1 &&\n        movedTiles[hitIndex].value === movedTiles[index].value\n      ) {\n        // Add to score\n        movedScore += movedTiles[hitIndex].value * 2;\n\n        // Change value of hit tile\n        movedTiles[hitIndex].value *= 2;\n\n        // Delete current tile\n        movedTiles.splice(index, 1);\n\n        // Change to unoccupied\n        movedBoard[j][i].occupied = false;\n\n        didMove = true;\n      } else {\n        // Return if nothing can move\n        if (!distance) {\n          continue;\n        }\n\n        // Move to right unoccupied space\n        movedTiles[index].leftFrom = movedTiles[index].left;\n        movedTiles[index].left = movedTiles[index].left - distance;\n\n        movedBoard[j][i].occupied = false;\n        movedBoard[j][i - distance].occupied = true;\n        didMove = true;\n      }\n    }\n  }\n  return { movedBoard, movedTiles, didMove, movedScore };\n};\n\nexport const moveUp = (movedBoard, movedTiles, movedScore) => {\n  let didMove = false;\n  for (let i = 0; i <= 3; i++) {\n    for (let j = 0; j <= 3; j++) {\n      // Get index of tile in state\n      const index = getIndex(movedTiles, j, i);\n\n      // Stop if not a tile\n      if (index === -1) continue;\n\n      // Get how far the tile can move\n      let distance = 0;\n      let k = i - 1;\n      while (k >= 0 && !movedBoard[k][j].occupied) {\n        distance++;\n        k--;\n      }\n\n      // Get index of hit tile\n      const hitIndex = getIndex(movedTiles, j, i - distance - 1);\n\n      // Check if can merge\n      if (\n        i - distance - 1 >= 0 &&\n        movedBoard[i - distance - 1][j].occupied &&\n        hitIndex !== -1 &&\n        movedTiles[hitIndex].value === movedTiles[index].value\n      ) {\n        // Add to score\n        movedScore += movedTiles[hitIndex].value * 2;\n\n        // Change value of hit tile\n        movedTiles[hitIndex].value *= 2;\n\n        // Delete current tile\n        movedTiles.splice(index, 1);\n\n        // Change to unoccupied\n        movedBoard[i][j].occupied = false;\n\n        didMove = true;\n      } else {\n        // Return if nothing can move\n        if (!distance) {\n          continue;\n        }\n        // Move to right unoccupied space\n        movedTiles[index].topFrom = movedTiles[index].top;\n        movedTiles[index].top = movedTiles[index].top - distance;\n\n        movedBoard[i][j].occupied = false;\n        movedBoard[i - distance][j].occupied = true;\n        didMove = true;\n      }\n    }\n  }\n  return { movedBoard, movedTiles, didMove, movedScore };\n};\n\nexport const moveDown = (movedBoard, movedTiles, movedScore) => {\n  let didMove = false;\n  for (let i = 3; i >= 0; i--) {\n    for (let j = 0; j <= 3; j++) {\n      // Get index of tile in state\n      const index = getIndex(movedTiles, j, i);\n\n      // Stop if not a tile\n      if (index === -1) continue;\n\n      // Get how far the tile can move\n      let distance = 0;\n      let k = i + 1;\n      while (k <= 3 && !movedBoard[k][j].occupied) {\n        distance++;\n        k++;\n      }\n\n      // Get index of hit tile\n      const hitIndex = getIndex(movedTiles, j, i + distance + 1);\n\n      // Check if can merge\n      if (\n        i + distance + 1 <= 3 &&\n        movedBoard[i + distance + 1][j].occupied &&\n        hitIndex !== -1 &&\n        movedTiles[hitIndex].value === movedTiles[index].value\n      ) {\n        // Add to score\n        movedScore += movedTiles[hitIndex].value * 2;\n\n        // Change value of hit tile\n        movedTiles[hitIndex].value *= 2;\n\n        // Delete current tile\n        movedTiles.splice(index, 1);\n\n        // Change to unoccupied\n        movedBoard[i][j].occupied = false;\n\n        didMove = true;\n      } else {\n        // Return if nothing can move\n        if (!distance) {\n          continue;\n        }\n\n        // Move to right unoccupied space\n        movedTiles[index].topFrom = movedTiles[index].top;\n        movedTiles[index].top = movedTiles[index].top + distance;\n\n        movedBoard[i][j].occupied = false;\n        movedBoard[i + distance][j].occupied = true;\n        didMove = true;\n      }\n    }\n  }\n  return { movedBoard, movedTiles, didMove, movedScore };\n};\n","import \"./App.css\";\nimport { useState, useEffect, useRef } from \"react\";\nimport * as movement from \"./functions/movement.js\";\n\nfunction App() {\n  const [spawn, setSpawn] = useState(true);\n  const [score, setScore] = useState(0);\n  const [bestScore, setBestScore] = useState(0);\n  const [winner, setWinner] = useState(0);\n\n  const [boardWidth, setBoardWidth] = useState(\n    Math.min(0.8 * window.innerWidth, 0.7 * window.innerHeight)\n  );\n\n  // Create board\n  const createBoard = () => {\n    const board = [];\n    for (let i = 0; i < 4; i++) {\n      const row = [];\n      for (let j = 0; j < 4; j++) {\n        row.push({\n          left: j,\n          top: i,\n          occupied: false,\n        });\n      }\n      board.push(row);\n    }\n    return board;\n  };\n\n  const [board, setBoard] = useState(createBoard());\n\n  // Duplicate immutably\n  const duplicateBoard = () => {\n    const boardCopy = [];\n    for (let i = 0; i < 4; i++) {\n      const row = [];\n      for (let j = 0; j < 4; j++) {\n        row.push({\n          left: j,\n          top: i,\n          occupied: board[i][j].occupied,\n        });\n      }\n      boardCopy.push(row);\n    }\n    return boardCopy;\n  };\n\n  const [tiles, setTiles] = useState([]);\n\n  const duplicateTiles = () => {\n    const newTiles = [];\n    tiles.forEach((tile) => {\n      newTiles.push({ ...tile });\n    });\n    return newTiles;\n  };\n\n  // Spawn new tile in random position\n  const spawnTile = () => {\n    let occupied = true;\n    let position;\n    let row;\n    let col;\n\n    // If board full don't spawn\n    if (tiles.length === 16) {\n      return;\n    }\n\n    // Search for empty space\n    while (occupied) {\n      row = Math.floor(Math.random() * 4);\n      col = Math.floor(Math.random() * 4);\n      position = board[row][col];\n      occupied = position.occupied;\n    }\n\n    const newTile = {\n      left: position.left,\n      top: position.top,\n      leftFrom: position.left,\n      topFrom: position.top,\n      value: 2,\n    };\n    setTiles([...tiles, newTile]);\n\n    // Set occupied on board\n    const newBoard = duplicateBoard();\n    newBoard[row][col].occupied = true;\n    setBoard(newBoard);\n  };\n\n  // Update board width when window resized\n  const windowResized = () => {\n    setBoardWidth(Math.min(0.8 * window.innerWidth, 0.7 * window.innerHeight));\n  };\n\n  // Press keys to move\n  const keyPressed = (e) => {\n    // If on winning screen do nothing\n    if (winner === 1) {\n      return;\n    }\n\n    // Get direction from keyboard or on-screen buttons\n    let direction;\n    if (e.key === \"d\" || e.key === \"ArrowRight\" || e === \"right\") {\n      direction = \"right\";\n    } else if (e.key === \"a\" || e.key === \"ArrowLeft\" || e === \"left\") {\n      direction = \"left\";\n    } else if (e.key === \"w\" || e.key === \"ArrowUp\" || e === \"up\") {\n      direction = \"up\";\n    } else if (e.key === \"s\" || e.key === \"ArrowDown\" || e === \"down\") {\n      direction = \"down\";\n    }\n\n    const newBoard = duplicateBoard();\n    let newTiles = duplicateTiles();\n\n    // Reset topFrom and leftFrom\n    newTiles = newTiles.map((tile) => {\n      return { ...tile, topFrom: tile.top, leftFrom: tile.left };\n    });\n\n    let move = { didMove: false };\n    switch (direction) {\n      case \"right\":\n        move = movement.moveRight(newBoard, newTiles, Number(score));\n        break;\n      case \"left\":\n        move = movement.moveLeft(newBoard, newTiles, Number(score));\n        break;\n      case \"up\":\n        move = movement.moveUp(newBoard, newTiles, Number(score));\n        break;\n      case \"down\":\n        move = movement.moveDown(newBoard, newTiles, Number(score));\n        break;\n      default:\n        break;\n    }\n\n    // If moved change board and tiles and spawn new tile\n    if (move.didMove) {\n      setBoard(move.movedBoard);\n      setTiles(move.movedTiles);\n      setSpawn(true);\n\n      // Update score\n      setScore(move.movedScore);\n\n      // Update best score in state and local storage\n      if (move.movedScore > bestScore) {\n        setBestScore(move.movedScore);\n        localStorage.setItem(\"bestScore\", move.movedScore);\n      }\n\n      // Check to see if 2048 was achieved\n      const winning = move.movedTiles.filter((tile) => tile.value === 2048);\n\n      if (winning.length) {\n        setWinner(winner + 1);\n      }\n    }\n  };\n\n  // Focus wrapper on start to allow key presses\n  const wrapperRef = useRef(null);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", windowResized);\n    wrapperRef.current.focus();\n\n    // Get previous best score\n    const bestLocal = Number(localStorage.getItem(\"bestScore\"));\n    if (bestLocal) {\n      setBestScore(bestLocal);\n    }\n\n    // eslint-disable-next-line\n  }, []);\n\n  // Spawn on first load and if last movement set it to true\n  if (spawn) {\n    spawnTile();\n    setSpawn(false);\n  }\n\n  // Reset game\n  const resetGame = () => {\n    setScore(0);\n    setBoard(createBoard());\n    setTiles([]);\n    setSpawn(true);\n    setWinner(0);\n  };\n\n  // Keep playing button\n  const keepPlaying = () => {\n    setWinner(2);\n    wrapperRef.current.focus();\n  };\n\n  return (\n    <div\n      className=\"wrapper\"\n      onKeyDown={keyPressed}\n      tabIndex=\"0\"\n      ref={wrapperRef}\n    >\n      <div className=\"header\">\n        <div>\n          <button onClick={resetGame}>New Game</button>\n        </div>\n        <div className=\"score\">\n          <div>\n            <h3>Score</h3>\n            <h4>{score}</h4>\n          </div>\n        </div>\n        <div className=\"score\">\n          <div>\n            <h3>Best</h3>\n            <h4>{bestScore}</h4>\n          </div>\n        </div>\n      </div>\n      <div className=\"App\">\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        <div className=\"grid\">\n          <div></div>\n        </div>\n        {tiles.map((tile, index) => {\n          const tileStyle = {\n            left: `${tile.left * boardWidth * 0.25}px`,\n            top: `${tile.top * boardWidth * 0.25}px`,\n            \"--left\": `${tile.left * boardWidth * 0.25}px`,\n            \"--leftFrom\": `${tile.leftFrom * boardWidth * 0.25}px`,\n            \"--top\": `${tile.top * boardWidth * 0.25}px`,\n            \"--topFrom\": `${tile.topFrom * boardWidth * 0.25}px`,\n            animation: \"slide 0.1s\",\n          };\n\n          // If last fade in after movement\n          if (index === tiles.length - 1) {\n            tileStyle.animation = \"fadeIn 0.2s cubic-bezier(1,0,1,.001)\";\n          }\n          return (\n            <div\n              className=\"tile\"\n              key={`${tile.left}${tile.top}`}\n              style={tileStyle}\n            >\n              <div className={`tile-${tile.value}`}>\n                <p>{tile.value}</p>\n              </div>\n            </div>\n          );\n        })}\n        {winner === 1 ? (\n          <div className=\"winner\">\n            <h1>Winner</h1>\n            <button onClick={keepPlaying}>Keep Playing</button>\n          </div>\n        ) : null}\n      </div>\n      <div className=\"buttons\">\n        <div>\n          <button\n            className=\"up\"\n            aria-label=\"up\"\n            onClick={() => keyPressed(\"up\")}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              fill=\"currentColor\"\n              viewBox=\"0 0 16 16\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z\"\n              />\n            </svg>\n          </button>\n          <button\n            className=\"left\"\n            aria-label=\"left\"\n            onClick={() => keyPressed(\"left\")}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              fill=\"currentColor\"\n              viewBox=\"0 0 16 16\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z\"\n              />\n            </svg>\n          </button>\n          <button\n            className=\"right\"\n            aria-label=\"right\"\n            onClick={() => keyPressed(\"right\")}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              fill=\"currentColor\"\n              viewBox=\"0 0 16 16\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\"\n              />\n            </svg>\n          </button>\n          <button\n            className=\"down\"\n            aria-label=\"down\"\n            onClick={() => keyPressed(\"down\")}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              fill=\"currentColor\"\n              viewBox=\"0 0 16 16\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorkerRegistration.register();"],"sourceRoot":""}