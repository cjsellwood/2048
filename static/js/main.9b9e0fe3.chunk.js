(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{13:function(e,t,c){},14:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c.n(n),r=c(7),o=c.n(r),l=(c(13),c(8)),d=c(5),s=c(2),a=(c(14),c(0));var u=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),c=t[0],i=t[1],r=Object(n.useState)(0),o=Object(s.a)(r,2),u=o[0],j=o[1],f=Object(n.useState)(0),v=Object(s.a)(f,2),b=v[0],h=v[1],p=Object(n.useState)(0),x=Object(s.a)(p,2),O=x[0],m=x[1],g=Object(n.useState)(Math.min(.8*window.innerWidth,.7*window.innerHeight)),w=Object(s.a)(g,2),N=w[0],S=w[1],k=function(){for(var e=[],t=0;t<4;t++){for(var c=[],n=0;n<4;n++)c.push({left:n,top:t,occupied:!1});e.push(c)}return e},M=Object(n.useState)(k()),I=Object(s.a)(M,2),y=I[0],F=I[1],B=function(){for(var e=[],t=0;t<4;t++){for(var c=[],n=0;n<4;n++)c.push({left:n,top:t,occupied:y[t][n].occupied});e.push(c)}return e},C=Object(n.useState)([]),A=Object(s.a)(C,2),z=A[0],L=A[1],R=function(){S(Math.min(.8*window.innerWidth,.7*window.innerHeight))},T=function(e){if(1!==O){var t;"d"===e.key||"ArrowRight"===e.key||"right"===e?t="right":"a"===e.key||"ArrowLeft"===e.key||"left"===e?t="left":"w"===e.key||"ArrowUp"===e.key||"up"===e?t="up":"s"!==e.key&&"ArrowDown"!==e.key&&"down"!==e||(t="down");var c=B(),n=function(){var e=[];return z.forEach((function(t){e.push(Object(d.a)({},t))})),e}();n=n.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{topFrom:e.top,leftFrom:e.left})}));var r={didMove:!1};switch(t){case"right":r=function(e,t,c){for(var n=!1,i=function(i){for(var r=function(r){if(!t.filter((function(e){return e.left===i&&e.top===r})).length||3===i)return"continue";for(var o=t.findIndex((function(e){return e.left===i&&e.top===r})),l=0,d=i+1;d<=3&&!e[r][d].occupied;)l++,d++;var s=t.findIndex((function(e){return e.left===i+l+1&&e.top===r}));if(l+i+1<=3&&e[r][i+l+1].occupied&&-1!==s&&t[s].value===t[o].value)c+=2*t[s].value,t[s].value*=2,t.splice(o,1),e[r][i].occupied=!1,n=!0;else{if(!l)return"continue";t[o].leftFrom=t[o].left,t[o].left=t[o].left+l,e[r][i].occupied=!1,e[r][i+l].occupied=!0,n=!0}},o=0;o<=3;o++)r(o)},r=3;r>=0;r--)i(r);return{movedBoard:e,movedTiles:t,didMove:n,movedScore:c}}(c,n,Number(u));break;case"left":r=function(e,t,c){for(var n=!1,i=function(i){for(var r=function(r){if(!t.filter((function(e){return e.left===i&&e.top===r})).length||0===i)return"continue";for(var o=t.findIndex((function(e){return e.left===i&&e.top===r})),l=0,d=i-1;d>=0&&!e[r][d].occupied;)l++,d--;var s=t.findIndex((function(e){return e.left===i-l-1&&e.top===r}));if(i-l-1>=0&&e[r][i-l-1].occupied&&-1!==s&&t[s].value===t[o].value)console.log("merge"),console.log("mer",t[o],t[s]),console.log("go"),c+=2*t[s].value,t[s].value*=2,t.splice(o,1),e[r][i].occupied=!1,n=!0;else{if(!l)return"continue";t[o].leftFrom=t[o].left,t[o].left=t[o].left-l,e[r][i].occupied=!1,e[r][i-l].occupied=!0,n=!0}},o=0;o<=3;o++)r(o)},r=0;r<=3;r++)i(r);return{movedBoard:e,movedTiles:t,didMove:n,movedScore:c}}(c,n,Number(u));break;case"up":r=function(e,t,c){for(var n=!1,i=function(i){for(var r=function(r){if(!t.filter((function(e){return e.left===r&&e.top===i})).length||0===i)return"continue";for(var o=t.findIndex((function(e){return e.left===r&&e.top===i})),l=0,d=i-1;d>=0&&!e[d][r].occupied;)l++,d--;var s=t.findIndex((function(e){return e.left===r&&e.top===i-l-1}));if(i-l-1>=0&&e[i-l-1][r].occupied&&-1!==s&&t[s].value===t[o].value)console.log("merge"),console.log("mer",t[o],t[s]),console.log("go"),c+=2*t[s].value,t[s].value*=2,t.splice(o,1),e[i][r].occupied=!1,n=!0;else{if(!l)return"continue";t[o].topFrom=t[o].top,t[o].top=t[o].top-l,e[i][r].occupied=!1,e[i-l][r].occupied=!0,n=!0}},o=0;o<=3;o++)r(o)},r=0;r<=3;r++)i(r);return{movedBoard:e,movedTiles:t,didMove:n,movedScore:c}}(c,n,Number(u));break;case"down":r=function(e,t,c){for(var n=!1,i=function(i){for(var r=function(r){if(!t.filter((function(e){return e.left===r&&e.top===i})).length||3===i)return"continue";for(var o=t.findIndex((function(e){return e.left===r&&e.top===i})),l=0,d=i+1;d<=3&&!e[d][r].occupied;)l++,d++;var s=t.findIndex((function(e){return e.left===r&&e.top===i+l+1}));if(i+l+1<=3&&e[i+l+1][r].occupied&&-1!==s&&t[s].value===t[o].value)c+=2*t[s].value,t[s].value*=2,t.splice(o,1),e[i][r].occupied=!1,n=!0;else{if(!l)return"continue";t[o].topFrom=t[o].top,t[o].top=t[o].top+l,e[i][r].occupied=!1,e[i+l][r].occupied=!0,n=!0}},o=0;o<=3;o++)r(o)},r=3;r>=0;r--)i(r);return{movedBoard:e,movedTiles:t,didMove:n,movedScore:c}}(c,n,Number(u))}if(r.didMove)F(r.movedBoard),L(r.movedTiles),i(!0),j(r.movedScore),r.movedScore>b&&(h(r.movedScore),localStorage.setItem("bestScore",r.movedScore)),r.movedTiles.filter((function(e){return 2048===e.value})).length&&m(O+1)}},H=Object(n.useRef)(null);return Object(n.useEffect)((function(){window.addEventListener("resize",R),H.current.focus();var e=Number(localStorage.getItem("bestScore"));e&&h(e)}),[]),c&&(!function(){var e,t,c,n=!0;if(16!==z.length){for(;n;)t=Math.floor(4*Math.random()),c=Math.floor(4*Math.random()),n=(e=y[t][c]).occupied;var i={left:e.left,top:e.top,leftFrom:e.left,topFrom:e.top,value:2};L([].concat(Object(l.a)(z),[i]));var r=B();r[t][c].occupied=!0,F(r)}}(),i(!1)),Object(a.jsxs)("div",{className:"wrapper",onKeyDown:T,tabIndex:"0",ref:H,children:[Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){j(0),F(k()),L([]),i(!0),m(0)},children:"New Game"})}),Object(a.jsx)("div",{className:"score",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Score"}),Object(a.jsx)("h4",{children:u})]})}),Object(a.jsx)("div",{className:"score",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Best"}),Object(a.jsx)("h4",{children:b})]})})]}),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{className:"grid",children:Object(a.jsx)("div",{})}),z.map((function(e,t){var c={left:"".concat(e.left*N*.25,"px"),top:"".concat(e.top*N*.25,"px"),"--left":"".concat(e.left*N*.25,"px"),"--leftFrom":"".concat(e.leftFrom*N*.25,"px"),"--top":"".concat(e.top*N*.25,"px"),"--topFrom":"".concat(e.topFrom*N*.25,"px"),animation:"slide 0.1s"};return t===z.length-1&&(c.animation="fadeIn 0.2s cubic-bezier(1,0,1,.001)"),Object(a.jsx)("div",{className:"tile",style:c,children:Object(a.jsx)("div",{className:"tile-".concat(e.value),children:Object(a.jsx)("p",{children:e.value})})},"".concat(e.left).concat(e.top))})),1===O?Object(a.jsxs)("div",{className:"winner",children:[Object(a.jsx)("h1",{children:"Winner"}),Object(a.jsx)("button",{onClick:function(){m(2),H.current.focus()},children:"Keep Playing"})]}):null]}),Object(a.jsx)("div",{className:"buttons",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:"up",onClick:function(){return T("up")},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(a.jsx)("path",{fillRule:"evenodd",d:"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"})})}),Object(a.jsx)("button",{className:"left",onClick:function(){return T("left")},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(a.jsx)("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})})}),Object(a.jsx)("button",{className:"right",onClick:function(){return T("right")},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(a.jsx)("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"})})}),Object(a.jsx)("button",{className:"down",onClick:function(){return T("down")},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(a.jsx)("path",{fillRule:"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"})})})]})})]})};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(u,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.9b9e0fe3.chunk.js.map