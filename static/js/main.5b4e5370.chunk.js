(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{13:function(e,t,c){},14:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);var i=c(1),o=c.n(i),r=c(7),n=c.n(r),a=(c(13),c(8)),l=c(5),s=c(2),d=(c(14),function(e,t,c){return e.findIndex((function(e){return e.left===t&&e.top===c}))}),u=c(0);var v=function(){var e=Object(i.useState)(!0),t=Object(s.a)(e,2),c=t[0],o=t[1],r=Object(i.useState)(0),n=Object(s.a)(r,2),v=n[0],j=n[1],f=Object(i.useState)(0),h=Object(s.a)(f,2),b=h[0],p=h[1],m=Object(i.useState)(0),O=Object(s.a)(m,2),x=O[0],w=O[1],g=Object(i.useState)(Math.min(.8*window.innerWidth,.7*window.innerHeight)),N=Object(s.a)(g,2),k=N[0],S=N[1],M=function(){for(var e=[],t=0;t<4;t++){for(var c=[],i=0;i<4;i++)c.push({left:i,top:t,occupied:!1});e.push(c)}return e},y=Object(i.useState)(M()),B=Object(s.a)(y,2),F=B[0],A=B[1],C=function(){for(var e=[],t=0;t<4;t++){for(var c=[],i=0;i<4;i++)c.push({left:i,top:t,occupied:F[t][i].occupied});e.push(c)}return e},W=Object(i.useState)([]),L=Object(s.a)(W,2),T=L[0],R=L[1],z=function(){S(Math.min(.8*window.innerWidth,.7*window.innerHeight))},E=function(e){if(1!==x){var t;"d"===e.key||"ArrowRight"===e.key||"right"===e?t="right":"a"===e.key||"ArrowLeft"===e.key||"left"===e?t="left":"w"===e.key||"ArrowUp"===e.key||"up"===e?t="up":"s"!==e.key&&"ArrowDown"!==e.key&&"down"!==e||(t="down");var c=C(),i=function(){var e=[];return T.forEach((function(t){e.push(Object(l.a)({},t))})),e}();i=i.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{topFrom:e.top,leftFrom:e.left})}));var r={didMove:!1};switch(t){case"right":r=function(e,t,c){for(var i=!1,o=3;o>=0;o--)for(var r=0;r<=3;r++){var n=d(t,o,r);if(-1!==n){for(var a=0,l=o+1;l<=3&&!e[r][l].occupied;)a++,l++;var s=d(t,o+a+1,r);if(a+o+1<=3&&e[r][o+a+1].occupied&&-1!==s&&t[s].value===t[n].value)c+=2*t[s].value,t[s].value*=2,t.splice(n,1),e[r][o].occupied=!1,i=!0;else{if(!a)continue;t[n].leftFrom=t[n].left,t[n].left=t[n].left+a,e[r][o].occupied=!1,e[r][o+a].occupied=!0,i=!0}}}return{movedBoard:e,movedTiles:t,didMove:i,movedScore:c}}(c,i,Number(v));break;case"left":r=function(e,t,c){for(var i=!1,o=0;o<=3;o++)for(var r=0;r<=3;r++){var n=d(t,o,r);if(-1!==n){for(var a=0,l=o-1;l>=0&&!e[r][l].occupied;)a++,l--;var s=d(t,o-a-1,r);if(o-a-1>=0&&e[r][o-a-1].occupied&&-1!==s&&t[s].value===t[n].value)c+=2*t[s].value,t[s].value*=2,t.splice(n,1),e[r][o].occupied=!1,i=!0;else{if(!a)continue;t[n].leftFrom=t[n].left,t[n].left=t[n].left-a,e[r][o].occupied=!1,e[r][o-a].occupied=!0,i=!0}}}return{movedBoard:e,movedTiles:t,didMove:i,movedScore:c}}(c,i,Number(v));break;case"up":r=function(e,t,c){for(var i=!1,o=0;o<=3;o++)for(var r=0;r<=3;r++){var n=d(t,r,o);if(-1!==n){for(var a=0,l=o-1;l>=0&&!e[l][r].occupied;)a++,l--;var s=d(t,r,o-a-1);if(o-a-1>=0&&e[o-a-1][r].occupied&&-1!==s&&t[s].value===t[n].value)c+=2*t[s].value,t[s].value*=2,t.splice(n,1),e[o][r].occupied=!1,i=!0;else{if(!a)continue;t[n].topFrom=t[n].top,t[n].top=t[n].top-a,e[o][r].occupied=!1,e[o-a][r].occupied=!0,i=!0}}}return{movedBoard:e,movedTiles:t,didMove:i,movedScore:c}}(c,i,Number(v));break;case"down":r=function(e,t,c){for(var i=!1,o=3;o>=0;o--)for(var r=0;r<=3;r++){var n=d(t,r,o);if(-1!==n){for(var a=0,l=o+1;l<=3&&!e[l][r].occupied;)a++,l++;var s=d(t,r,o+a+1);if(o+a+1<=3&&e[o+a+1][r].occupied&&-1!==s&&t[s].value===t[n].value)c+=2*t[s].value,t[s].value*=2,t.splice(n,1),e[o][r].occupied=!1,i=!0;else{if(!a)continue;t[n].topFrom=t[n].top,t[n].top=t[n].top+a,e[o][r].occupied=!1,e[o+a][r].occupied=!0,i=!0}}}return{movedBoard:e,movedTiles:t,didMove:i,movedScore:c}}(c,i,Number(v))}if(r.didMove)A(r.movedBoard),R(r.movedTiles),o(!0),j(r.movedScore),r.movedScore>b&&(p(r.movedScore),localStorage.setItem("bestScore",r.movedScore)),r.movedTiles.filter((function(e){return 2048===e.value})).length&&w(x+1)}},I=Object(i.useRef)(null);return Object(i.useEffect)((function(){window.addEventListener("resize",z),I.current.focus();var e=Number(localStorage.getItem("bestScore"));e&&p(e)}),[]),c&&(!function(){var e,t,c,i=!0;if(16!==T.length){for(;i;)t=Math.floor(4*Math.random()),c=Math.floor(4*Math.random()),i=(e=F[t][c]).occupied;var o={left:e.left,top:e.top,leftFrom:e.left,topFrom:e.top,value:2};R([].concat(Object(a.a)(T),[o]));var r=C();r[t][c].occupied=!0,A(r)}}(),o(!1)),Object(u.jsxs)("div",{className:"wrapper",onKeyDown:E,tabIndex:"0",ref:I,children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("div",{children:Object(u.jsx)("button",{onClick:function(){j(0),A(M()),R([]),o(!0),w(0)},children:"New Game"})}),Object(u.jsx)("div",{className:"score",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Score"}),Object(u.jsx)("h4",{children:v})]})}),Object(u.jsx)("div",{className:"score",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Best"}),Object(u.jsx)("h4",{children:b})]})})]}),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),Object(u.jsx)("div",{className:"grid",children:Object(u.jsx)("div",{})}),T.map((function(e,t){var c={left:"".concat(e.left*k*.25,"px"),top:"".concat(e.top*k*.25,"px"),"--left":"".concat(e.left*k*.25,"px"),"--leftFrom":"".concat(e.leftFrom*k*.25,"px"),"--top":"".concat(e.top*k*.25,"px"),"--topFrom":"".concat(e.topFrom*k*.25,"px"),animation:"slide 0.1s"};return t===T.length-1&&(c.animation="fadeIn 0.2s cubic-bezier(1,0,1,.001)"),Object(u.jsx)("div",{className:"tile",style:c,children:Object(u.jsx)("div",{className:"tile-".concat(e.value),children:Object(u.jsx)("p",{children:e.value})})},"".concat(e.left).concat(e.top))})),1===x?Object(u.jsxs)("div",{className:"winner",children:[Object(u.jsx)("h1",{children:"Winner"}),Object(u.jsx)("button",{onClick:function(){w(2),I.current.focus()},children:"Keep Playing"})]}):null]}),Object(u.jsx)("div",{className:"buttons",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"up","aria-label":"up",onClick:function(){return E("up")},children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"})})}),Object(u.jsx)("button",{className:"left","aria-label":"left",onClick:function(){return E("left")},children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})})}),Object(u.jsx)("button",{className:"right","aria-label":"right",onClick:function(){return E("right")},children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"})})}),Object(u.jsx)("button",{className:"down","aria-label":"down",onClick:function(){return E("down")},children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"})})})]})})]})},j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function f(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var c=e.installing;null!=c&&(c.onstatechange=function(){"installed"===c.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(v,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/2048",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/2048","/service-worker.js");j?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(c){var i=c.headers.get("content-type");404===c.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):f(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):f(t,e)}))}}()}},[[16,1,2]]]);
//# sourceMappingURL=main.5b4e5370.chunk.js.map